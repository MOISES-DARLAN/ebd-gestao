{% extends 'base.html' %}
{% block title %}Histórico da Turma: {{ turma.nome }}{% endblock %}
{% block style %}
<style>
    .chamada-item { padding: 1rem; border: 1px solid var(--border-color); margin-bottom: 1rem; }
    .chamada-main { display: flex; justify-content: space-between; align-items: center; }
    .chamada-date { font-weight: bold; font-size: 1.1rem; }
    .chamada-summary { font-size: 0.9rem; color: var(--text-muted); margin-top: 0.5rem; border-top: 1px solid var(--border-color); padding-top: 0.5rem; }
</style>
{% endblock %}
{% block content %}
<header class="header">
    <a href="{% url 'ebd:dashboard' %}" class="header-brand" style="text-decoration: none;">El Shaday EBD</a>
    <form action="{% url 'ebd:logout' %}" method="post" style="margin:0;"><button type="submit" class="btn btn-danger">Sair</button>{% csrf_token %}</form>
</header>
<main class="container">
    <div class="card">
        <div class="page-header">
            <h1>Histórico de Chamadas <span style="font-weight: 300; color: #777;">| {{ turma.nome }}</span></h1>
            <a href="{% url 'ebd:turma_dashboard' turma.id %}" class="btn btn-secondary">Voltar ao Painel</a>
        </div>
        {% for chamada in historico %}
            <div class="chamada-item">
                <div class="chamada-main">
                    <span class="chamada-date">{{ chamada.data|date:"d/m/Y" }}</span>
                    <a href="{% url 'reports:details' chamada.id %}" class="btn btn-info">Detalhes</a>
                </div>
                <div class="chamada-summary">
                    Presentes: {{ chamada.alunos_presentes.count }} | Visitantes: {{ chamada.visitantes }} | Oferta: R$ {{ chamada.oferta_do_dia }}
                </div>
            </div>
        {% empty %}
            <p>Nenhum registro de chamada encontrado para esta turma.</p>
        {% endfor %}
    </div>
</main>
{% endblock %}