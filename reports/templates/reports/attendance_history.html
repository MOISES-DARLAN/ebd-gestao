{% extends 'base.html' %}
{% block title %}Hist처rico da Turma: {{ turma.nome }}{% endblock %}
{% block style %}
<style>
    .chamada-item { padding: 1rem; border: 1px solid var(--border-color); margin-bottom: 1rem; }
    .chamada-main { display: flex; justify-content: space-between; align-items: center; }
    .chamada-date { font-weight: bold; font-size: 1.1rem; }
    .chamada-summary { font-size: 0.9rem; color: var(--text-muted); margin-top: 0.5rem; border-top: 1px solid var(--border-color); padding-top: 0.5rem; }
</style>
{% endblock %}
{% block content %}

<main class="container">
    <div class="card">
        <div class="page-header">
            <h1>Hist처rico de Chamadas <span style="font-weight: 300; color: #777;">| {{ turma.nome }}</span></h1>
            
            {% comment %} L처gica condicional para o bot찾o Voltar {% endcomment %}
            {% if request.user.is_staff %}
                <a href="{% url 'core:admin_dashboard' %}" class="btn btn-secondary">Voltar ao Painel Admin</a>
            {% else %}
                <a href="{% url 'ebd:turma_dashboard' turma.id %}" class="btn btn-secondary">Voltar ao Painel da Turma</a>
            {% endif %}
        </div>
        {% for chamada in historico %}
            <div class="chamada-item">
                <div class="chamada-main">
                    <span class="chamada-date">{{ chamada.data|date:"d/m/Y" }}</span>
                    <a href="{% url 'reports:details' chamada.id %}" class="btn btn-info">Detalhes</a>
                </div>
                <div class="chamada-summary">
                    Presentes: {{ chamada.presentes_count }} | Visitantes: {{ chamada.visitantes }} | Oferta: R$ {{ chamada.oferta_do_dia }}
                </div>
            </div>
        {% empty %}
            <p>Nenhum registro de chamada encontrado para esta turma.</p>
        {% endfor %}
    </div>
</main>
{% endblock %}